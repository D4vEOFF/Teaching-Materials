\usepackage{xparse}
\usepackage{lineno}

\newcommand{\codeindent}{0.7cm}
\newcommand{\pseudoindent}{0.1cm}
\newcounter{algcounter}

\renewcommand{\thealgcounter}{%
  \thesection.%
  \ifnum\value{subsection}>0 \arabic{subsection}.\fi
  \arabic{algcounter}%
}

\NewDocumentEnvironment{pseudo}{moo}{
	\bigskip\noindent
	\refstepcounter{algcounter}
	
	\noindent\textbf{Algoritmus \thealgcounter} (\textsc{#1})\\
	\IfNoValueF{#2}{\textit{Vstup:} #2\\[.3em]}
	\hspace*{\pseudoindent}
	\begin{minipage}{\dimexpr\columnwidth-\pseudoindent}
}{\end{minipage}\par
\noindent
\IfNoValueF{#3}{\textit{Výstup:} #3\\}
}

% Příkazy
\newcommand{\Comment}[1]{{\fontfamily{qcr}\selectfont\textcolor{green}{// #1}}\\}
\newcommand{\Print}[1]{\textbf{Vytiskni} #1}
\newcommand{\Ret}[1]{\textbf{Vrať} #1}

% Podmínky
\newenvironment{If}[1]{
	\noindent
	\textbf{Pokud} #1, \textbf{proveď}:\\
	\hspace*{\codeindent}
  	\begin{minipage}{\dimexpr\columnwidth-\codeindent}
}{\end{minipage}\par}

\newenvironment{ElseIf}[1]{
	\noindent
	\textbf{Jinak pokud} #1, \textbf{proveď}:\\
	\hspace*{\codeindent}
  	\begin{minipage}{\dimexpr\columnwidth-\codeindent}
}{\end{minipage}\par}

\newenvironment{Else}{
	\noindent
	\textbf{Jinak proveď}:\\
	\hspace*{\codeindent}
  	\begin{minipage}{\dimexpr\columnwidth-\codeindent}
}{\end{minipage}\par}

% Cykly
\NewDocumentEnvironment{While}{m}{
	\noindent
	\textbf{Dokud} #1, \textbf{opakuj}:\\
	\hspace*{\codeindent}
  	\begin{minipage}{\dimexpr\columnwidth-\codeindent}
}{\end{minipage}\par}

\NewDocumentEnvironment{DoWhile}{m}{
	\noindent
	\textbf{proveď}:\\
	\hspace*{\codeindent}
  	\begin{minipage}{\dimexpr\columnwidth-\codeindent}
}{\end{minipage}\par
\textbf{Dokud} #1, \textbf{opakuj}\par}

\NewDocumentEnvironment{For}{m}{
	\noindent
	\textbf{Pro} #1 \textbf{opakuj}:\\
	\hspace*{\codeindent}
  	\begin{minipage}{\dimexpr\columnwidth-\codeindent}
}{\end{minipage}\par}

% Funkce
\NewDocumentEnvironment{Function}{mo}{
	\noindent
	\textbf{Funkce} \textsc{#1}\IfNoValueF{#2}{(#2)}\\
	\hspace*{\codeindent}
  	\begin{minipage}{\dimexpr\columnwidth-\codeindent}
}{\end{minipage}\par}